<!DOCTYPE html>
<html lang="id">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Riwayat</title>
    <style>
     /* ===== GENERAL ===== */
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #c9f1ff, #e0f7ff, #ffffff);
    margin: 0;
    padding: 0;
}

/* ===== CONTAINER ===== */
.history-container {
    max-width: 1000px;
    margin: 40px auto;
    padding: 20px;
}

/* ===== TITLE ===== */
.history-title {
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    color: #024873;
    margin-bottom: 30px;
}

/* ===== SUBTITLE ===== */
.history-subtitle {
    font-size: 22px;
    font-weight: bold;
    margin-top: 30px;
    color: #035c91;
}

/* ===== CARD WRAPPER ===== */
.history-card {
    background: #ffffff;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    margin-top: 15px;
    overflow-x: auto;
}

/* ===== TABLE ===== */
.history-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

.history-table th {
    background: #0ea5e9;
    color: white;
    padding: 12px;
    text-align: left;
    font-size: 14px;
}

.history-table td {
    padding: 10px;
    border-bottom: 1px solid #e5f6ff;
    font-size: 14px;
}

.history-table tr:hover {
    background: #f0faff;
}

.history-table tr:last-child td {
    border-bottom: none;
}

/* ===== BACK BUTTON ===== */
.back-btn {
    display: inline-block;
    margin-top: 25px;
    padding: 10px 18px;
    background: #0ea5e9;
    color: white;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    transition: 0.3s;
}

.back-btn:hover {
    background: #0284c7;
}
    </style>
</head>
<body>
  <%- include('partials/navbar', { Name: Name }) %>

     <div class="top-bar">
        <div>Health Check - History</div>
        <div>
            <span>Welcome, <%= userName %></span>
            <a href="/logout" class="logout">Logout</a>
        </div>
    </div>

    <div class="container">

        <!-- BMI / Weight History -->
        <div class="section-title">BMI / Weight History</div>
        <% if(weightHistory.length > 0){ %>
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Date</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Height (cm)</th>
                    <th>Weight (kg)</th>
                    <th>BMI</th>
                    <th>Category</th>
                </tr>
            </thead>
            <tbody>
                <% weightHistory.forEach((item, index) => { %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td><%= new Date(item.created_at).toLocaleString() %></td>
                    <td><%= item.name %></td>
                    <td><%= item.age %></td>
                    <td><%= item.height %></td>
                    <td><%= item.weight %></td>
                    <td><%= item.bmi %></td>
                    <td><%= item.weight_category %></td>
                </tr>
                <% }) %>
            </tbody>
        </table>
        <% } else { %>
            <p>No BMI history found.</p>
        <% } %>

        <!-- Vitals / Blood Pressure & SpO2 History -->
        <div class="section-title">Blood Pressure & SpO2 History</div>
        <% if(vitalsHistory.length > 0){ %>
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Date</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Systolic (mmHg)</th>
                    <th>Diastolic (mmHg)</th>
                    <th>Blood Pressure Category</th>
                    <th>SpO2 (%)</th>
                    <th>SpO2 Category</th>
                </tr>
            </thead>
            <tbody>
                <% vitalsHistory.forEach((item, index) => { %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td><%= new Date(item.created_at).toLocaleString() %></td>
                    <td><%= item.name %></td>
                    <td><%= item.age %></td>
                    <td><%= item.systolic %></td>
                    <td><%= item.diastolic %></td>
                    <td><%= item.blood_category %></td>
                    <td><%= item.spo2 %></td>
                    <td><%= item.spo2_category %></td>
                </tr>
                <% }) %>
            </tbody>
        </table>
        <% } else { %>
            <p>No vitals history found.</p>
        <% } %>

    </div>

  <a href="/index">Kembali</a>
</body>
</html>
